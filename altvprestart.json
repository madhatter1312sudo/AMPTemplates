[
  {
    "PreStartStageName": "Download Alt:V Server and Files",
    "PreStartSourcePlatform": "Linux",
    "PreStartSource": "RunScript",
    "PreStartSourceData": "mkdir -p GenericApplication/data GenericApplication/modules/js-module GenericApplication/modules && if [ ! -f GenericApplication/altv-server ]; then echo 'Downloading altv-server...' && wget -q -O GenericApplication/altv-server https://cdn.alt-mp.com/server/release/x64_linux/altv-server && chmod +x GenericApplication/altv-server; fi && if [ ! -f GenericApplication/data/vehmodels.bin ]; then echo 'Downloading data files...' && wget -q -O GenericApplication/data/vehmodels.bin https://cdn.alt-mp.com/server/release/x64_linux/data/vehmodels.bin; fi && if [ ! -f GenericApplication/data/vehmods.bin ]; then wget -q -O GenericApplication/data/vehmods.bin https://cdn.alt-mp.com/server/release/x64_linux/data/vehmods.bin; fi && if [ ! -f GenericApplication/data/pedmodels.bin ]; then wget -q -O GenericApplication/data/pedmodels.bin https://cdn.alt-mp.com/server/release/x64_linux/data/pedmodels.bin; fi && if [ ! -f GenericApplication/data/weaponmodels.bin ]; then wget -q -O GenericApplication/data/weaponmodels.bin https://cdn.alt-mp.com/server/release/x64_linux/data/weaponmodels.bin; fi && if [ ! -f GenericApplication/modules/js-module/libjs-module.so ]; then echo 'Downloading modules...' && wget -q -O GenericApplication/modules/js-module/libjs-module.so https://cdn.alt-mp.com/js-module/release/x64_linux/libjs-module.so && chmod +x GenericApplication/modules/js-module/libjs-module.so; fi && if [ ! -f GenericApplication/modules/js-module/libnode.so.108 ]; then wget -q -O GenericApplication/modules/js-module/libnode.so.108 https://cdn.alt-mp.com/js-module/release/x64_linux/libnode.so.108 && chmod +x GenericApplication/modules/js-module/libnode.so.108; fi && if [ ! -f GenericApplication/modules/libcsharp-module.so ]; then wget -q -O GenericApplication/modules/libcsharp-module.so https://cdn.alt-mp.com/coreclr-module/release/x64_linux/libcsharp-module.so && chmod +x GenericApplication/modules/libcsharp-module.so; fi && if [ ! -f GenericApplication/AltV.Net.Host.dll ]; then wget -q -O GenericApplication/AltV.Net.Host.dll https://cdn.alt-mp.com/coreclr-module/release/x64_linux/AltV.Net.Host.dll; fi && if [ ! -f GenericApplication/AltV.Net.Host.runtimeconfig.json ]; then wget -q -O GenericApplication/AltV.Net.Host.runtimeconfig.json https://cdn.alt-mp.com/coreclr-module/release/x64_linux/AltV.Net.Host.runtimeconfig.json; fi && chmod +x GenericApplication/altv-server 2>/dev/null && find GenericApplication/modules -name '*.so' -exec chmod +x {} \\; 2>/dev/null || true",
    "RunInShell": true
  },
  {
    "PreStartStageName": "Create server.cfg with httpPort",
    "PreStartSourcePlatform": "Linux",
    "PreStartSource": "RunScript",
    "PreStartSourceData": "cat > GenericApplication/server.cfg << 'CFGEOF'\nname: Regenesis\nhost: 0.0.0.0\nport: 7788\nhttpPort: 7780\nplayers: 128\npassword: \ntoken: \nannounce: false\ngamemode: Freeroam\nwebsite: \nlanguage: en\ndescription: Alt:V Multiplayer Server\nmodules: [ ]\nresources: [ ]\nCFGEOF\n",
    "RunInShell": true
  }
]

